/* ______ _           __             __  __           _   ____  _     _    _ _____  
  |  ____(_)         / _|           |  \/  |         | | |  _ \| |   | |  | |  __ \ 
  | |__   _ _ __ ___| |_ _____  __  | \  / | ___   __| | | |_) | |   | |  | | |__) |
  |  __| | | '__/ _ \  _/ _ \ \/ /  | |\/| |/ _ \ / _` | |  _ <| |   | |  | |  _  / 
  | |    | | | |  __/ || (_) >  <   | |  | | (_) | (_| | | |_) | |___| |__| | | \ \ 
  |_|    |_|_|  \___|_| \___/_/\_\  |_|  |_|\___/ \__,_| |____/|______\____/|_|  \_\
  
                                                                                    
  Github:         github.com/datguypiko/Firefox-Mod-Blur     */

/*===============================================================
===================== E X T R A   M O D S =======================
===============================================================*/
@import url("limit_css_data_leak.css");

@import url("ublock-icon-change.css");
@import url("blur_chrome/min-max-close_buttons.css");
@import url("blur_chrome/menu_icon_change_to_firefox.css");
@import url("blur_chrome/cleaner_extensions_menu.css");
@import url("blur_chrome/pinned_tabs_no_bg_color.css");
@import url("blur_chrome/colored_soundplaying_tab.css");


/*=====================================================================
================= D A R K   T H E M E   C O L O R S ===================
=====================================================================*/
:root {
  /* Main dark color, url bar, active tab etc. */
  --firefoxcss-main-bg-color: hsl(240, 2%, 13%);
  
  /* Main lighter color, toolbar background */
  --firefoxcss-item-bg-color: hsl(240, 2%, 20%);
  
  /* Tab colors */
  --firefoxcss-tab-bg-color: hsl(240, 2%, 26%);
  --firefoxcss-tab-hover-bg-color: hsl(240, 2%, 32%);
  --firefoxcss-tab-active-bg-color: var(--firefoxcss-main-bg-color);
  --firefoxcss-non-active-tabs: hsla(0, 0%, 100%, 0.65);
  
  --firefoxcss-normal-tabs-box-shadow: 1px 1px 1px -1px rgba(0, 0, 0, 0.4);
  --firefoxcss-tab-multiselect-outline: rgba(255, 255, 255, 0.1);
  
  /* Tab playing audio speaker icon colors */
  --firefoxcss-tab-speaker-color: hsla(0, 0%, 80%);
  --firefoxcss-tab-speaker-icon-color: hsl(0, 0%, 100%);
  --firefoxcss-tab-speaker-icon-hover-color: hsl(0, 0%, 10%);
  --firefoxcss-tab-speaker-icon-small-background: hsla(0, 0%, 80%);
  
  /* Context menu colors */
  --firefoxcss-context-menu-top-color: #131313cf;
  /* Bookmarks bar colors */
  --firefoxcss-bookmarks-bg-color: var(--firefoxcss-item-bg-color);
  
  /* Change background color when loading a page */
  --firefoxcss-bright-flash-color: var(--firefoxcss-main-bg-color);
  
  /* Toolbar buttons */
  --firefoxcss-toolbar-button-box-shadow: rgba(0, 0, 0, 0.3);
  --firefoxcss-toolbar-button-active-box-shadow: rgba(0, 0, 0, 0.3);
  
  /* Search Bar and breakout (when in focus) colors */
  --firefoxcss-url-bar-bg-color: var(--firefoxcss-main-bg-color);
  --firefoxcss-url-border-bottom-color: 1px solid hsla(0, 0%, 100%, 0.2);
  --firefoxcss-url-border-top-color: 1px solid hsla(0, 0%, 0%, 0.15);
  --firefoxcss-url-breakout-bar-bg-color: var(--firefoxcss-main-bg-color);
  --firefoxcss-url-breakout-border-bottom-color: hsla(0, 0%, 70%, 0.05);
  --firefoxcss-url-box-shadow-color: inset 1px 1px 1px 0px rgba(0, 0, 0, 0.35);
  --firefoxcss-url-autocomplete-highlight: hsl(240, 2%, 26%);
  --firefoxcss-url-breakout-box-shadow: rgba(0, 0, 0, 0.09) 0px 2px 1px,
  rgba(0, 0, 0, 0.09) 0px 4px 2px, rgba(0, 0, 0, 0.09) 0px 8px 4px,
  rgba(0, 0, 0, 0.09) 0px 16px 8px, rgba(0, 0, 0, 0.09) 0px 32px 16px;
  --firefoxcss-url-clipboard-button: color-mix(in srgb, currentColor 10%, transparent);
  
  /* Other colors */
  --firefoxcss-urlbar-zoom-button: hsla(0, 0%, 60%, 0.35);
  --firefoxcss-top-bar-border-bottom-color: hsla(0, 0%, 6%, 0.75);
  --firefoxcss-private-browsing-menu-color: hsl(277, 70%, 64%);
  --firefoxcss-private-browsing-drop-shadow: drop-shadow(0px 0px 1px #000000d5);
  --firefoxcss-statuspanel-bg-color: var(--firefoxcss-main-bg-color);
  --firefoxcss-contextmenu-hover-text: white;
  --firefoxcss-customize-view-dashed-outline: hsla(0, 0%, 100%, 0.25);
  --firefoxcss-customize-view-flex-space: #d0ba9e;
  --firefoxcss-customize-view-overflow-menu: hsl(240, 2%, 10%);
  
  /* ============== Firefox Global colors change ==================== */
  --arrowpanel-background: var(--firefoxcss-main-bg-color) !important;
  --button-hover-bgcolor: hsla(0, 0%, 60%, 0.35) !important;
  --button-active-bgcolor: hsla(0, 0%, 45%, 0.35) !important;
  --button-bgcolor: hsla(0, 0%, 45%, 0.9) !important;
  --arrowpanel-border-color: hsla(0, 0%, 50%, 0.25) !important;
  --dark-menu-background-color: #222121 !important;
  --dark-menu-border-color: rgb(55, 55, 55) !important;
  --dark-menu-background-color: #222121 !important;
  --dark-menu-border-color: rgb(55, 55, 55) !important;
  --dark-menuitem-hover-background-color: rgba(159,159,159,0.35) !important;
  --panel-separator-color: var(--arrowpanel-border-color) !important;
  --panel-separator-zap-gradient: var(--panel-separator-color) !important;
  --lwt-sidebar-background-color: var(--firefoxcss-main-bg-color) !important;
  --urlbarView-highlight-background: hsl(240, 2%, 20%) !important;
  --urlbarView-hover-background: color-mix(in srgb, currentColor 8%, transparent) !important;
}

/*=====================================================================
=================== G L O B A L   V A R I A B L E S ===================
=====================================================================*/

:root {
--firefoxcss-top-bar-border-bottom-size: 1px;
--firefoxcss-border-radius: 15px;
--firefoxcss-control-buttons-margin: 95px;
--firefoxcss-tab-min-width: 110px;
--firefoxcss-tab-max-width: 150px;
}

/*=====================================================================
====================== T O O L B A R   O R D E R ======================
=======================================================================
Order of Toolbars
* 0 - top
* 1 - second from top
* 2 - bottom */

/* SEARCH BAR TOOLBAR */
#navigator-toolbox #nav-bar {
order: 0 !important;
}

/* TABS TOOLBAR */
#titlebar {
order: 1 !important;
}

/* BOOKMARKS TOOLBAR*/
#PersonalToolbar {
order: 2 !important;
}

/* Extra titlebar menu (above or below tabs, opens with alt) */
#titlebar #toolbar-menubar {
order: 0 !important;
}

/*=====================================================================
========================= S E T   C O L O R S =========================
=====================================================================*/

/* Sidebar background color change */
#browser #sidebar-box {
--sidebar-background-color: var(--firefoxcss-main-bg-color) !important;
}

/* Bookmarks bar background color */
#PersonalToolbar {
  background-color: var(--firefoxcss-bookmarks-bg-color) !important;
  backdrop-filter: blur(10px) !important;
}

/* Set navigation toolbar to transparent */
#navigator-toolbox #nav-bar {
  background-color: transparent !important;
}

/* Whole Main Toolbar */
#navigator-toolbox {
  background-color: var(--firefoxcss-item-bg-color) !important;
}

/* Avoids bright flash */
#tabbrowser-tabpanels {
  background-color: var(--uc-light-bkgnd-color, var(--firefoxcss-bright-flash-color)) !important;
}

/* CTRL+F Search Bar color changes  */
.browserContainer > findbar {
background-image: none !important;
background-color: var(--firefoxcss-main-bg-color) !important;
}

.browserContainer > findbar .findbar-textbox {
background-color: var(--firefoxcss-item-bg-color) !important;
}

/*=====================================================================
========================= H I D E   E L E M E N T S ===================
=====================================================================*/

/* Remove empty space from tabs bar */
#TabsToolbar .titlebar-spacer[type="pre-tabs"],
#TabsToolbar .titlebar-spacer[type="post-tabs"],
#TabsToolbar .titlebar-spacer,
/* Remove Search bar background color */
#urlbar-background,
/* Remove Line above search engine selection in search bar */
#urlbar .search-one-offs,
/* Remove lefover window buttons from extra menu bar (when pressing alt)*/
#titlebar #toolbar-menubar .titlebar-buttonbox-container,
/* Private browser icons remove and change main menu to purple */
#private-browsing-indicator-with-label,
.private-browsing-indicator,
/* Hide tracking protection icon from Search Bar */
#tracking-protection-icon-container,
/* Hide permission icons, see it when pressing permission button */
#blocked-permissions-container,
/* hide tab bar if only one tab */
#tabbrowser-tabs .tabbrowser-tab:only-of-type,
#tabbrowser-tabs .tabbrowser-tab:only-of-type + #tabbrowser-arrowscrollbox-periphery,
#tabbrowser-tabs:not([overflow="true"]) ~ #alltabs-button
/*,#back-button,
#forward-button,
.tabbrowser-tab .tab-close-button,
#tabs-newtab-button,
.urlbar-go-button */ {
  display: none !important;
}

#tabbrowser-tabs, #tabbrowser-arrowscrollbox {
  min-height:0 !important;
}

#navigator-toolbox {
  border-bottom: none !important;
}

/*=====================================================================
======================= H E I G H T   F I X E S =======================
=====================================================================*/

/* Tabs Bar height */
:root {
--tab-min-height: 28px !important;
}

:root #tabbrowser-tabs {
--tab-min-height: 28px !important;
}

/* Menu Bar height */
#toolbar-menubar {
  margin-top: 0px !important;
  margin-bottom: 0px !important;
  padding-top: 0px !important;
  padding-bottom: 0px !important;
  line-height: 22px !important;
  max-height: 22px !important;
}

#navigator-toolbox {
  padding-top: 0px !important;
  padding-bottom: 0px !important;
}

/* Search Bar height */
#urlbar-container {
  --urlbar-container-height: 38px !important;
}

#urlbar-container #urlbar {
  --urlbar-toolbar-height: 38px !important;
  --urlbar-height: 30px !important;
  --urlbar-min-height: 32px !important;
}

#wrapper-urlbar-container #urlbar {
  height: var(--urlbar-height) !important;
}

/*=====================================================================
=============================== I C O N S =============================
=====================================================================*/

/* Set icon colors with context-fill without forcing them in svg files
about:config -> svg.context-properties.content.enabled -> true*/
#PanelUI-menu-button {
  list-style-image: url(blur_chrome/assets/menu.svg) !important;
}
:root[privatebrowsingmode="temporary"] #PanelUI-menu-button {
  list-style-image: url(blur_chrome/assets/menu-private.svg) !important;
}

#find-button {
  list-style-image: url(blur_chrome/assets/search.svg) !important;
}

#privatebrowsing-button {
  list-style-image: url(blur_chrome/assets/private.svg) !important;
}

#forward-button,
menugroup > #context-forward,
#search-container #searchbar .search-go-button,
#urlbar-go-button {
  list-style-image: url(blur_chrome/assets/right-arrow.svg) !important;
}

#back-button,
menugroup > #context-back {
  list-style-image: url(blur_chrome/assets/left-arrow.svg) !important;
}

/*=====================================================================
============================ S E A R C H   B A R ======================
=====================================================================*/

/* Some elements border radius */
#urlbar-input-container,
#searchbar,
#urlbar-container,
#urlbar {
  border-radius: var(--firefoxcss-border-radius) !important;
}

/* Remove line in search bar below text separating search results */
#urlbar .urlbarView-body-inner {
  border-top: 0px !important;
}

/* Dont remember what this is for */
#urlbar:not(.megabar):not([focused="true"]),
#urlbar:not(.megabar):not([focused="true"]):hover {
  border-bottom: transparent;
}

/* Aligns text in the middle of search bar */
#urlbar .urlbar-input-box {
  text-align: center;
}

#urlbar {
  --autocomplete-popup-highlight-background: var(--firefoxcss-url-autocomplete-highlight) !important;
  border: 0 !important;
  background-color: var(--firefoxcss-url-bar-bg-color) !important;
  border-bottom: var(--firefoxcss-url-border-bottom-color) !important;
  border-top: var(--firefoxcss-url-border-top-color) !important;
  box-shadow: var(--firefoxcss-url-box-shadow-color) !important;
}

/* Removes separator line at the bottom of search bar separating search buttons and menus */
.urlbarView:not([noresults]) > .search-one-offs:not([hidden]) {
  border-top: none !important;
}

/* Megabar - Popout search bar on focus */
#urlbar[breakout] {
  height: auto !important;
}

#urlbar[breakout][breakout-extend][open] {
  background-color: var(--firefoxcss-url-breakout-bar-bg-color) !important;
  border-bottom: 1px solid var(--firefoxcss-url-breakout-border-bottom-color) !important;
  border-top: var(--firefoxcss-url-border-top-color) !important;
  box-shadow: var(--firefoxcss-url-breakout-box-shadow) !important;
}

#urlbar[breakout][breakout-extend] > #urlbar-input-container,
#urlbar-input-container {
  height: var(--urlbar-height) !important;
  padding-block: 0px !important;
  padding-inline: 0px !important;
  transition: none !important;
}

#urlbar[breakout] {
  top: calc((var(--urlbar-toolbar-height) - var(--urlbar-height)) / 2) !important;
  left: 0 !important;
  width: 100% !important;
}

#urlbar[breakout]:not([open]){
  bottom: calc((var(--urlbar-container-height) - var(--urlbar-height)) / 2) !important;
}

/* Styling Extra search bar that you can add to firefox */
#search-container #searchbar {
  outline: 0 !important;
  border: 0 !important;
  border-radius: var(--firefoxcss-border-radius) !important;
  background-color: var(--firefoxcss-url-bar-bg-color) !important;
  border-bottom: var(--firefoxcss-url-border-bottom-color) !important;
  border-top: var(--firefoxcss-url-border-top-color) !important;
  box-shadow: var(--firefoxcss-url-box-shadow-color) !important;
}


#PopupSearchAutoComplete {
  --panel-background: var(--firefoxcss-url-breakout-bar-bg-color) !important;
}

/*=====================================================================
============================= T A B S =================================
=====================================================================*/

/* Non active tabs have darker text */
.tabbrowser-tab:not([selected]):not([multiselected]):not(:hover)
  .tab-label-container .tab-label {
  color: var(--firefoxcss-non-active-tabs) !important;
}

.tabbrowser-tab .tab-label-container .tab-label {
  transition: color 250ms ease !important;
}

/* Pinned tabs padding  */
:root:not([uidensity="compact"]) .tab-content[pinned] {
  padding: 0 8px !important;
}

/* Main BAR */
#navigator-toolbox {
  --tabs-border-color: none !important;
  --tabs-navbar-shadow-size: 0px !important;
}

#TabsToolbar
  #tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs])
  > #tabbrowser-arrowscrollbox
  > .tabbrowser-tab:nth-child(1 of :not([pinned], [hidden])) {
  margin-inline-start: 0px !important;
}

#tabbrowser-tabs {
  --tab-loading-fill: transparent !important;
  margin-left: 2px !important;
}

/* Width of the tabs. Important to have Fadein or it breaks fonctionality */
/* not([style^="max-width"] :not([overflow])*/
#tabbrowser-tabs .tabbrowser-tab[fadein]:not([pinned]) {
  max-width: var(--firefoxcss-tab-max-width) !important;
  min-width: var(--firefoxcss-tab-min-width) !important;
}

/* Selected tabs width increase */
#tabbrowser-tabs:not([overflow]) .tabbrowser-tab[selected][fadein]:not([pinned]) {
  max-width: 175px !important;
}

/* Selected tabs width when overflowing */
#tabbrowser-tabs[overflow] .tabbrowser-tab[selected][fadein]:not([pinned]) {
  min-width: 150px !important;
}

.tabbrowser-tab:not([selected]):not([multiselected]):not(:hover)
.tab-icon-image {
  opacity: 0.8 !important;
  transition: opacity 250ms ease !important;
}

/* 
 * Fix the height of the tab because if you
 * change --tab-min-height it doesnt work for fullcreen
 */
#TabsToolbar {
  padding-top: 0px !important;
  padding-bottom: 2px !important;
}

/* Remove the line between the tabs / seperators */
#tabbrowser-tabs .tabbrowser-tab::before,
#tabbrowser-tabs .tabbrowser-tab::after {
  border: 0 !important;
}

/* Normal tabs design */
.tabbrowser-tab .tab-background:not([selected]) {
  border: 0 !important;
  border-radius: var(--firefoxcss-border-radius) !important;
  background-image: none !important;
  background-color: var(--firefoxcss-tab-bg-color) !important;
  transition: background-color 250ms ease !important;
  box-shadow: var(--firefoxcss-normal-tabs-box-shadow) !important;
}

/* Normal tabs design on hover */
#tabbrowser-tabs .tabbrowser-tab:hover
> .tab-stack
> .tab-background:not([selected]) {
  border: 0 !important;
  border-radius: var(--firefoxcss-border-radius) !important;
  background-image: none !important;
  background-color: var(--firefoxcss-tab-hover-bg-color) !important;
  box-shadow: var(--firefoxcss-normal-tabs-box-shadow) !important;
}

/* Selected tabs design */
#tabbrowser-tabs .tabbrowser-tab .tab-background[selected] {
  border: 0 !important;
  border-radius: var(--firefoxcss-border-radius) !important;
  background-image: none !important;
  background-color: var(--firefoxcss-tab-active-bg-color) !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Multiselect tabs */
#tabbrowser-tabs .tabbrowser-tab .tab-background[multiselected] {
  border: 0 !important;
  border-radius: var(--firefoxcss-border-radius) !important;
  background-image: none !important;
  outline: none !important;
  background-color: var(--firefoxcss-tab-active-bg-color) !important;
  box-shadow: none !important;
}

#tabbrowser-tabs .tabbrowser-tab .tab-background:is([selected]):is([multiselected]) {
  outline: 1px solid var(--firefoxcss-tab-multiselect-outline) !important;
  outline-offset: 0px !important;
  outline-width: 1px !important;
}

#titlebar #TabsToolbar #tabbrowser-tabs .tabbrowser-tab .tab-background {
  margin-block: 2px !important;
}

/* Remove right and left side tab overflow border line */
#scrollbutton-up ~ spacer {
  border-color: transparent !important;
}

/* Speaker on tabs color fixes */
.tab-icon-overlay:not([crashed])[soundplaying]:hover,
.tab-icon-overlay:not([crashed])[muted]:hover,
.tab-icon-overlay:not([crashed])[activemedia-blocked]:hover {
  color: currentColor !important;
  stroke: var(--firefoxcss-tab-speaker-icon-small-background) !important;
  background-color: var(--firefoxcss-tab-speaker-color) !important;
  fill-opacity: 0.95 !important;
}

.tabbrowser-tab[selected] .tab-icon-overlay:not([crashed])[soundplaying]:hover,
.tabbrowser-tab[selected] .tab-icon-overlay:not([crashed])[muted]:hover,
.tabbrowser-tab[selected] .tab-icon-overlay:not([crashed])[activemedia-blocked]:hover {
  color: currentColor !important;
  stroke: var(--firefoxcss-tab-speaker-color) !important;
  background-color: var(--firefoxcss-tab-speaker-color) !important;
  fill-opacity: 0.95 !important;
}

#TabsToolbar .tab-icon-overlay:not([crashed])[soundplaying],
#TabsToolbar .tab-icon-overlay:not([crashed])[muted],
#TabsToolbar .tab-icon-overlay:not([crashed])[activemedia-blocked] {
  color: var(--firefoxcss-tab-speaker-icon-color) !important;
}

#TabsToolbar .tab-icon-overlay:not([crashed])[soundplaying]:hover,
#TabsToolbar .tab-icon-overlay:not([crashed])[muted]:hover,
#TabsToolbar .tab-icon-overlay:not([crashed])[activemedia-blocked]:hover {
  color: var(--firefoxcss-tab-speaker-icon-hover-color) !important;
}

/*=====================================================================
============ W I N D O W   C O N T R O L   B U T T O N S ==============
=====================================================================*/

@media (-moz-platform: windows) {
  /* ----- Close/min/max fix ----- */
  #toolbar-menubar .titlebar-button {
    padding-block: 0px !important;
  }

  #TabsToolbar .titlebar-buttonbox-container {
    order: 1 !important;
    padding-top: 3px !important;
    padding-bottom: 3px !important;
    padding-right: 3px !important;
    padding-left: 3px !important;
  }

  #nav-bar-customization-target > :is(toolbarbutton, toolbaritem):first-child {
    padding-inline-start: 2px !important;
  }

  #nav-bar {
    padding-right: var(--firefoxcss-control-buttons-margin) !important;
  }

  #navigator-toolbox:not([inFullscreen])
    #TabsToolbar .titlebar-buttonbox-container {
    visibility: visible !important;
    display: flex !important;
    position: absolute !important;
    top: 1px;
    right: 0;
  }

  .titlebar-buttonbox-container .titlebar-button > .toolbarbutton-icon {
    height: 12px !important;
    min-height: 12px !important;
    width: 12px !important;
    min-width: 12px !important;
  }

  .titlebar-buttonbox-container .titlebar-button {
    border-radius: var(--toolbarbutton-border-radius);
    padding: 10px !important;
    padding-left: 10px !important;
    padding-right: 10px !important;
    margin-left: 0px !important;
    margin-right: 0px !important;
  }

  :root[sizemode="maximized"] .titlebar-buttonbox-container {
    padding-top: 0px !important;
  }

  #navigator-toolbox[inFullscreen]
    #nav-bar {
    padding-right: initial !important;
  }

  .titlebar-buttonbox-container .titlebar-min {
    order: 0 !important;
  }

  .titlebar-buttonbox-container .titlebar-max,
  .titlebar-restore {
    order: 1 !important;
  }

  .titlebar-buttonbox-container .titlebar-close {
    order: 2 !important;
  }

  @media only screen and (max-width: 670px) {
    #navigator-toolbox:not([inFullscreen])
      #TabsToolbar .titlebar-buttonbox-container {
      visibility: visible !important;
      display: flex !important;
      position: relative !important;
      order: 1 !important;
      padding-top: 1px !important;
      padding-bottom: 1px !important;
    }

    #navigator-toolbox:not([inFullscreen]) #nav-bar {
      padding-right: initial !important;
    }
  }
}

/*=====================================================================
====================== C O N T E X T   M E N U ========================
=====================================================================*/

menupopup :-moz-any(menu, menuitem) {
  margin-top: 0px !important;
  margin-bottom: 0px !important;
  padding-top: 4px !important;
  padding-bottom: 4px !important;
}

@media (-moz-platform: windows) {
  #context-navigation
    > .menuitem-iconic[_moz-menuactive="true"]
    > .menu-iconic-left
    > .menu-iconic-icon {
    border-radius: var(--toolbarbutton-border-radius) !important;
    background-color: var(--button-hover-bgcolor) !important;
  }

  menupopup
  > :-moz-any(menu[_moz-menuactive="true"], menuitem[_moz-menuactive="true"]) {
    background-color: color-mix(in srgb, currentColor 9%, transparent) !important;
  }
  #context-navigation > .menuitem-iconic[_moz-menuactive] {
    &:not([disabled]) {
      background-color: transparent !important; 
    }
    &[disabled] {
      background-color: transparent !important;
    }
  }
}

menupopup :-moz-any(menu:first-child, menuitem:first-child) {
  margin-top: 0px !important;
}

menupopup :-moz-any(menu:last-child, menuitem:last-child) {
  margin-bottom: 0px !important;
}

/* ----- Menu Separator #context-sep-selectall ----- */
menuseparator {
  border-color: var(--arrowpanel-border-color) !important;
  /* border-top: 1px solid ThreeDShadow; */
  padding-block: 2px !important;
}

menuseparator#context-sep-navigation {
  border-color: var(--arrowpanel-border-color) !important;
}

/* ----- Menu Colors -- border - rgba(82, 82, 94, 0.31) ----- */
:not(#ContentSelectDropdown) > menupopup {
  --panel-border-color: var(--arrowpanel-border-color) !important;
  --panel-background: var(--firefoxcss-main-bg-color) !important;
  --panel-padding: 5px 0 5px !important;
  --panel-border-radius: 8px !important;
}

#context-navigation:not([hidden]) {
  background-color: var(--firefoxcss-context-menu-top-color) !important;
  padding: 1px 0px 1px !important;
  border-top-left-radius: 8px !important;
  border-top-right-radius: 8px !important;
  margin-left: 0px !important;
  margin-right: 0px !important;
}

menupopup#contentAreaContextMenu {
  --panel-padding: unset !important;
  --panel-padding: 0 0 5px !important;
}

menupopup
menuitem:is(#context-openlinkintab, #context-undo, #context-viewimage) {
  margin-top: 5px !important;
}

#context-sep-navigation {
  padding-block: 0px !important;
}

#context-navigation #context-back[disabled="true"] .menu-iconic-left .menu-iconic-icon{
  opacity: 0.5 !important;
}

#context-navigation #context-forward[disabled="true"] .menu-iconic-left .menu-iconic-icon{
  opacity: 0.5 !important;
}

#context-navigation > .menuitem-iconic {
  & > .menu-iconic-left {
    & > .menu-iconic-icon {
      width: 42px !important;
      height: 32px !important;
    }
  }
} 

/*=====================================================================
=========================== B U T T O N S =============================
=====================================================================*/

/* Remove line on the right side of the Firefox view button and fix margins */
:root:not([privatebrowsingmode], [firefoxviewhidden]) :is(toolbarbutton, toolbarpaletteitem) + #tabbrowser-tabs,
:root[privatebrowsingmode]:not([firefoxviewhidden]) :is(
  toolbarbutton:not(#firefox-view-button),
  toolbarpaletteitem:not(#wrapper-firefox-view-button)
) + #tabbrowser-tabs {
  border-inline-start: 0 !important;
  margin-inline-start: 0px !important;
}

#firefox-view-button {
  padding-right: 0px !important;
}

:root[privatebrowsingmode="temporary"] #PanelUI-menu-button {
  fill: var(--firefoxcss-private-browsing-menu-color) !important;
}

:root[privatebrowsingmode="temporary"] #PanelUI-menu-button
  .toolbarbutton-badge-stack .toolbarbutton-icon {
  filter: var(--firefoxcss-private-browsing-drop-shadow) !important;
}


/*=====================================================================
==================== L I N U X   S U P P O R T ========================
=======================================================================
@media (-moz-gtk-csd-available)
@media (-moz-gtk-csd-reversed-placement) */

@media (-moz-platform: linux) {
  #context-navigation > .menuitem-iconic[_moz-menuactive="true"] {
    border-radius: var(--toolbarbutton-border-radius) !important;
    background-color: var(--button-hover-bgcolor) !important;
  }

  #context-navigation > .menuitem-iconic[_moz-menuactive="true"][disabled] {
    background-color: transparent !important;
  }

  #context-navigation > .menuitem-iconic,
  menupopup,
  menuseparator {
    appearance: none !important;
  }


  menu:where([_moz-menuactive="true"]):not([disabled]),
  menuitem:where([_moz-menuactive="true"]):not([disabled]) {
    background-color: var(--button-hover-bgcolor) !important;
    color: var(--firefoxcss-contextmenu-hover-text) !important;
  }


  #context-navigation:not([hidden]) {
    padding: 2px 2px !important;
  }


  menuseparator#context-sep-navigation {
    margin-top: 0 !important;
    margin-inline: 0 !important;
  }


  /*   Smaller tab text and height. Broken on fedora? */
  #tabbrowser-tabs:not([secondarytext-unsupported]) .tab-label-container {
    height: 2.4em !important;
    font-size: 0.9em;
  }

  /* ----- Close/min/max fix ----- */
  #toolbar-menubar .titlebar-button {
    padding-block: 0px !important;
  }

  #TabsToolbar .titlebar-buttonbox-container {
    order: 1 !important;
    padding-top: 3px !important;
    padding-bottom: 3px !important;
    padding-right: 3px !important;
    padding-left: 3px !important;
  }

  #nav-bar-customization-target > :is(toolbarbutton, toolbaritem):first-child {
    padding-inline-start: 2px !important;
  }

  #nav-bar {
    padding-right: var(--firefoxcss-control-buttons-margin) !important;
  }

  #navigator-toolbox:not([inFullscreen])
    #TabsToolbar
    .titlebar-buttonbox-container {
    visibility: visible !important;
    display: flex !important;
    position: absolute !important;
    top: 1px;
    right: 0;
  }

  #TabsToolbar .titlebar-buttonbox-container .titlebar-button {
    border-radius: var(--toolbarbutton-border-radius);
  }

  :root[sizemode="maximized"] .titlebar-buttonbox-container {
    padding-top: 0px !important;
  }

  #navigator-toolbox[inFullscreen] #nav-bar {
    padding-right: initial !important;
  }

  .titlebar-buttonbox-container .titlebar-min {
    order: 0 !important;
  }

  .titlebar-buttonbox-container .titlebar-max,
  .titlebar-restore {
    order: 1 !important;
  }

  .titlebar-buttonbox-container .titlebar-close {
    order: 2 !important;
  }

  @media only screen and (max-width: 670px) {
    #navigator-toolbox:not([inFullscreen])
      #TabsToolbar
      .titlebar-buttonbox-container {
      visibility: visible !important;
      display: flex !important;
      position: relative !important;
      order: 1 !important;
      padding-top: 1px !important;
      padding-bottom: 1px !important;
    }

    #navigator-toolbox:not([inFullscreen]) #nav-bar {
      padding-right: initial !important;
    }
  }
}

/*=====================================================================
=============== C U S T O M I Z A T I O N   M E N U ===================
=====================================================================*/
/* Customize toolbar background color */
#customization-container {
  background-image: none !important;
  background-color: var(--firefoxcss-main-bg-color) !important;
}

#PersonalToolbar[customizing] toolbarpaletteitem[place="toolbar"] > toolbarspring,
#nav-bar[customizing] toolbarpaletteitem[place="toolbar"] > toolbarspring,
#customization-container toolbarpaletteitem[place="palette"] > toolbarspring {
  outline: 1px solid var(--firefoxcss-customize-view-flex-space) !important;
  outline-offset: -3px !important;
  border-radius: 6px !important;
}

@media not (-moz-platform: macos) {
  #customization-panelWrapper > .panel-arrowcontent {
    border-radius: 10px !important;
    background-color: var(--firefoxcss-customize-view-overflow-menu) !important;
  }
}

#PersonalToolbar[customizing] {
  outline: 1px dashed var(--firefoxcss-customize-view-dashed-outline) !important;
}

.browserContainer > findbar .findbar-textbox {
  background-color: var(--firefoxcss-item-bg-color) !important;
}

#customization-container #customization-footer {
  border-top: none !important;
}

@media (-moz-platform: macos),
  (-moz-platform: windows),
  not (prefers-contrast) {
  #customization-container #customization-footer .customizationmode-button {
    border-radius: 4px !important;
  }
}

/*=====================================================================
============================= O T H E R ===============================
=====================================================================*/

/* Status URL change (bottom left when hovering a link)  */
#statuspanel-label {
  background-color: var(--firefoxcss-statuspanel-bg-color) !important;
  border-radius: 4px !important;
  border-color: transparent !important;
  color: currentColor !important;
  margin: 0 0 3px 3px !important;
  padding: 4px !important;
}


/* Container extension code */
#TabsToolbar #tabbrowser-tabs .tabbrowser-tab[usercontextid] .tab-background:not([selected]) {
  background: var(--identity-tab-color) !important;
  opacity: 0.3 !important;
}

/* Container extension code */
#tabbrowser-tabs .tab-context-line {
  display:none !important;
}

/* Some color fixes after 125.0.1 update. URLBAR Clipboard buttons  */
.urlbarView-row:is([type="switchtab"], [type="remotetab"], [type="clipboard"]) {
  & > .urlbarView-row-inner > .urlbarView-no-wrap > .urlbarView-action {
     background-color: var(--firefoxcss-url-clipboard-button) !important;
    padding: 4px 8px !important;
  }
}
.urlbarView-button {
  .urlbarView-row:is([row-selectable]:hover, [selected]) > &:not(:hover, [open]) {
    background-color: transparent !important;
    opacity: 0.8 !important;
  }
}  
